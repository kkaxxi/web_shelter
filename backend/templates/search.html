{% extends 'base.html' %} {% block title %}–ü–æ—à—É–∫ —Ç–≤–∞—Ä–∏–Ω{% endblock %} {% block
content %}
<section class="search-section">
  <div class="search-header">
    <a class="back-link" href="{{ url_for('index') }}">‚Üê –ù–∞–∑–∞–¥ –Ω–∞ –≥–æ–ª–æ–≤–Ω—É</a>
    <a class="link favorites-link" href="{{ url_for('animals.favorites') }}">
      <img
        src="{{ url_for('static', filename='images/star.svg') }}"
        alt="‚≠ê"
        class="icon"
      />
      –£–ª—é–±–ª–µ–Ω—ñ
    </a>
  </div>

  <h2 class="filter-title">–§—ñ–ª—å—Ç—Ä–∏ –ø–æ—à—É–∫—É</h2>

  <form class="filter-form" method="get">
    <div class="filter-group">
      <label class="filter-label">–ö–∞—Ç–µ–≥–æ—Ä—ñ—è</label><br />
      <input type="radio" name="species" value="any" checked /> –ù–µ –≤–∞–∂–ª–∏–≤–æ<br />
      <input type="radio" name="species" value="–∫—ñ—Ç" /> –ö—ñ—à–∫–∞<br />
      <input type="radio" name="species" value="—Å–æ–±–∞–∫–∞" /> –°–æ–±–∞–∫–∞<br />
    </div>

    <div class="filter-group">
      <label class="filter-label">–°—Ç–∞—Ç—å</label><br />
      <input type="radio" name="gender" value="any" checked /> –ù–µ –≤–∞–∂–ª–∏–≤–æ<br />
      <input type="radio" name="gender" value="female" /> –ñ<br />
      <input type="radio" name="gender" value="male" /> –ú<br />
    </div>

    <div class="filter-group">
      <label class="filter-label">–í—ñ–∫</label><br />
      –≤—ñ–¥
      <input
        type="number"
        name="min_age"
        value="0"
        min="0"
        class="input-small"
      />
      –¥–æ
      <input
        type="number"
        name="max_age"
        value="25"
        max="25"
        class="input-small"
      />
    </div>

    <div class="filter-group">
      <label class="filter-label">–†–æ–∑–º—ñ—Ä</label><br />
      <input type="radio" name="size" value="any" checked /> –ù–µ –≤–∞–∂–ª–∏–≤–æ<br />
      <input type="radio" name="size" value="small" /> –ú–∞–ª–µ–Ω—å–∫–∏–π<br />
      <input type="radio" name="size" value="medium" /> –°–µ—Ä–µ–¥–Ω—ñ–π<br />
      <input type="radio" name="size" value="large" /> –í–µ–ª–∏–∫–∏–π<br />
    </div>

    <div class="filter-group">
      <label class="filter-label">–°—Ç–∞—Ç—É—Å</label><br />
      <select name="status">
        <option value="any">–£—Å—ñ</option>
        <option value="–≤ –ø—Ä–∏—Ç—É–ª–∫—É">–≤ –ø—Ä–∏—Ç—É–ª–∫—É</option>
        <option value="—É—Å–∏–Ω–æ–≤–ª–µ–Ω–æ">—É—Å–∏–Ω–æ–≤–ª–µ–Ω–æ</option>
      </select>
    </div>

    <div class="filter-buttons">
      <a href="{{ url_for('animals.search_animals') }}" class="button"
        >–û—á–∏—Å—Ç–∏—Ç–∏ —Ñ—ñ–ª—å—Ç—Ä–∏</a
      >
      <button class="button" type="submit">–ó–∞—Å—Ç–æ—Å—É–≤–∞—Ç–∏ —Ñ—ñ–ª—å—Ç—Ä–∏</button>
    </div>
  </form>

  <a href="{{ url_for('animals.adoption_rules') }}" class="button"
    >üìÑ –ü—Ä–∞–≤–∏–ª–∞ —É—Å–∏–Ω–æ–≤–ª–µ–Ω–Ω—è</a
  >

  <section class="results-list">
    {% for animal in animals %} {% if request.args.get('status') == '—É—Å–∏–Ω–æ–≤–ª–µ–Ω–æ'
    or animal.status != '—É—Å–∏–Ω–æ–≤–ª–µ–Ω–æ' %}
    <article class="result-item">
      <form
        method="post"
        action="{{ url_for('animals.toggle_favorite', animal_id=animal.id) }}"
      >
        <button
          type="submit"
          class="fav-button"
          {%
          if
          not
          current_user.is_authenticated
          %}
          onclick="alert('‚ùå –©–æ–± –¥–æ–¥–∞—Ç–∏ —É–ª—é–±–ª–µ–Ω—Ü—è ‚Äî —É–≤—ñ–π–¥—ñ—Ç—å –∞–±–æ –∑–∞—Ä–µ—î—Å—Ç—Ä—É–π—Ç–µ—Å—å.'); return false;"
          {%
          endif
          %}
        >
          {% if current_user.is_authenticated and animal.id in user_fav_ids %}
          ‚ù§Ô∏è {% else %} ü§ç {% endif %}
        </button>
      </form>

      <a
        href="{{ url_for('animals.animal_detail', animal_id=animal.id) }}"
        class="result-link"
      >
        <img
          class="result-image"
          src="{{ animal.photo_url }}"
          alt="{{ animal.name }}"
        />
        <h3 class="result-name">{{ animal.name }}</h3>
      </a>

      {% if current_user.is_authenticated and current_user.role == 'admin' %}
      <div class="admin-actions">
        <a href="{{ url_for('animals.edit_animal', animal_id=animal.id) }}"
          >‚úèÔ∏è –†–µ–¥–∞–≥—É–≤–∞—Ç–∏</a
        >
        |
        <form
          method="post"
          action="{{ url_for('animals.delete_animal', animal_id=animal.id) }}"
          style="display: inline"
        >
          <button type="submit" onclick="return confirm('–¢–æ—á–Ω–æ –≤–∏–¥–∞–ª–∏—Ç–∏?')">
            üóëÔ∏è
          </button>
        </form>
        {% if animal.status != '—É—Å–∏–Ω–æ–≤–ª–µ–Ω–æ' %}
        <br />
        <a href="{{ url_for('animals.upload_contract', animal_id=animal.id) }}"
          >üìÑ –ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –¥–æ–≥–æ–≤—ñ—Ä</a
        >
        {% endif %}
      </div>
      {% endif %}
    </article>
    {% endif %} {% endfor %}
  </section>
</section>
{% endblock %}
