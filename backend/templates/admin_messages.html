{% extends 'base.html' %} {% block title %}–ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è{% endblock %} {% block
content %}

<h2>üì¨ –ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ü—ñ—ó</h2>

<!-- üîÅ –§—ñ–ª—å—Ç—Ä–∏ -->
<p>
  –ü–æ–∫–∞–∑–∞—Ç–∏:
  <a
    href="{{ url_for('help.view_all_messages', show='volunteer', sort=sort_order, unanswered=1 if show_unanswered else None) }}"
    >üêæ –õ–∏—à–µ –∑–∞—è–≤–∫–∏</a
  >
  |
  <a
    href="{{ url_for('help.view_all_messages', show='feedback', sort=sort_order, unanswered=1 if show_unanswered else None) }}"
    >üì¨ –õ–∏—à–µ –∑–≤–æ—Ä–æ—Ç–Ω—ñ–π –∑–≤‚Äô—è–∑–æ–∫</a
  >
  |
  <a
    href="{{ url_for('help.view_all_messages', show='all', sort=sort_order, unanswered=1 if show_unanswered else None) }}"
    >üîÅ –í—Å—ñ</a
  >
</p>

<p>
  <a
    href="{{ url_for('help.view_all_messages', show=show, sort=sort_order, unanswered=1 if not show_unanswered else None) }}"
  >
    üì• {% if show_unanswered %}–ü–æ–∫–∞–∑–∞—Ç–∏ –≤—Å—ñ{% else %}–õ–∏—à–µ –±–µ–∑ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ{% endif
    %}
  </a>
</p>

<p>
  –°–æ—Ä—Ç—É–≤–∞—Ç–∏: {% if sort_order == 'asc' %}
  <a
    href="{{ url_for('help.view_all_messages', show=show, sort='desc', unanswered=1 if show_unanswered else None) }}"
    >üïí –ù–æ–≤—ñ—à—ñ</a
  >
  {% else %}
  <a
    href="{{ url_for('help.view_all_messages', show=show, sort='asc', unanswered=1 if show_unanswered else None) }}"
    >üïò –°—Ç–∞—Ä—ñ—à—ñ</a
  >
  {% endif %}
</p>

<hr />

<!-- üì® –ó–≤–æ—Ä–æ—Ç–Ω—ñ–π –∑–≤‚Äô—è–∑–æ–∫ -->
{% if show in ['all', 'feedback'] %}
<h3>üì® –ó–≤–æ—Ä–æ—Ç–Ω—ñ–π –∑–≤‚Äô—è–∑–æ–∫</h3>
{% if feedbacks %}
<ul style="list-style: none; padding: 0">
  {% for f in feedbacks %}
  <li style="border: 1px solid #ccc; padding: 10px; margin-bottom: 10px">
    <strong>üë§ {{ f.name }}</strong> | üìß
    <a href="mailto:{{ f.email }}">{{ f.email }}</a><br />
    <p style="margin-top: 5px">{{ f.message }}</p>
    <small>‚è± {{ f.timestamp.strftime('%d.%m.%Y %H:%M') }}</small><br />
    {% if f.reply %}
    <p><strong>üü† –í—ñ–¥–ø–æ–≤—ñ–¥—å:</strong> {{ f.reply }}</p>
    {% else %}
    <a href="{{ url_for('help.reply_feedback', feedback_id=f.id) }}"
      >‚úçÔ∏è –î–∞—Ç–∏ –≤—ñ–¥–ø–æ–≤—ñ–¥—å</a
    >
    {% endif %}
  </li>
  {% endfor %}
</ul>
{% else %}
<p>–ù–µ–º–∞—î –∑–≤–æ—Ä–æ—Ç–Ω–æ–≥–æ –∑–≤‚Äô—è–∑–∫—É.</p>
{% endif %} {% endif %}

<!-- üêæ –ó–∞—è–≤–∫–∏ –Ω–∞ –≤–æ–ª–æ–Ω—Ç–µ—Ä—Å—Ç–≤–æ -->
{% if show in ['all', 'volunteer'] %}
<h3>üêæ –ó–∞—è–≤–∫–∏ –Ω–∞ –≤–æ–ª–æ–Ω—Ç–µ—Ä—Å—Ç–≤–æ</h3>
{% if volunteers %}
<ul style="list-style: none; padding: 0">
  {% for v in volunteers %}
  <li style="border: 1px solid #ccc; padding: 10px; margin-bottom: 10px">
    <p><strong>–°–ø–æ—Å—ñ–± –¥–æ–ø–æ–º–æ–≥–∏:</strong> {{ v.help_type }}</p>
    {% if v.comment %}
    <p><strong>–ö–æ–º–µ–Ω—Ç–∞—Ä:</strong> {{ v.comment }}</p>
    {% endif %}
    <p><strong>–î–∞—Ç–∞:</strong> {{ v.timestamp.strftime('%d.%m.%Y %H:%M') }}</p>
    {% if v.user %}
    <p>
      <strong>–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á:</strong> {{ v.user.username }} | üìß
      <a href="mailto:{{ v.user.email }}">{{ v.user.email }}</a>
    </p>
    {% endif %} {% if v.reply %}
    <p><strong>üü† –í—ñ–¥–ø–æ–≤—ñ–¥—å:</strong> {{ v.reply }}</p>
    {% else %}
    <a href="{{ url_for('help.reply_volunteer', volunteer_id=v.id) }}"
      >‚úçÔ∏è –î–∞—Ç–∏ –≤—ñ–¥–ø–æ–≤—ñ–¥—å</a
    >
    {% endif %}
  </li>
  {% endfor %}
</ul>
{% else %}
<p>–ù–µ–º–∞—î –≤–æ–ª–æ–Ω—Ç–µ—Ä—Å—å–∫–∏—Ö –∑–∞—è–≤–æ–∫.</p>
{% endif %} {% endif %}

<!-- üìÑ –ü–∞–≥—ñ–Ω–∞—Ü—ñ—è -->
{% if show in ['all', 'feedback'] and feedback_pagination %}
<div>
  {% if feedback_pagination.has_prev %}
  <a
    href="{{ url_for('help.view_all_messages', show=show, sort=sort_order, unanswered=1 if show_unanswered else None, page=feedback_pagination.prev_num) }}"
    >‚¨Ö –ü–æ–ø–µ—Ä–µ–¥–Ω—è</a
  >
  {% endif %} –°—Ç–æ—Ä—ñ–Ω–∫–∞ {{ feedback_pagination.page }} –∑ {{
  feedback_pagination.pages }} {% if feedback_pagination.has_next %}
  <a
    href="{{ url_for('help.view_all_messages', show=show, sort=sort_order, unanswered=1 if show_unanswered else None, page=feedback_pagination.next_num) }}"
    >–ù–∞—Å—Ç—É–ø–Ω–∞ ‚û°</a
  >
  {% endif %}
</div>
{% endif %} {% if show in ['all', 'volunteer'] and volunteer_pagination %}
<div>
  {% if volunteer_pagination.has_prev %}
  <a
    href="{{ url_for('help.view_all_messages', show=show, sort=sort_order, unanswered=1 if show_unanswered else None, page=volunteer_pagination.prev_num) }}"
    >‚¨Ö –ü–æ–ø–µ—Ä–µ–¥–Ω—è</a
  >
  {% endif %} –°—Ç–æ—Ä—ñ–Ω–∫–∞ {{ volunteer_pagination.page }} –∑ {{
  volunteer_pagination.pages }} {% if volunteer_pagination.has_next %}
  <a
    href="{{ url_for('help.view_all_messages', show=show, sort=sort_order, unanswered=1 if show_unanswered else None, page=volunteer_pagination.next_num) }}"
    >–ù–∞—Å—Ç—É–ø–Ω–∞ ‚û°</a
  >
  {% endif %}
</div>
{% endif %}

<p><a href="{{ url_for('help.help_page') }}">‚¨Ö –ù–∞–∑–∞–¥</a></p>

{% endblock %}
